<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Electricity Rate Calculator</title><style>body{font-family:Arial,sans-serif;background-color:#f4f9f4;color:#333;margin:0;padding:20px}table{width:100%;border-collapse:collapse;margin-bottom:20px}table,th,td{border:1px solid #4CAF50}th,td{padding:10px;text-align:center}th{background-color:#e8f5e9}label{font-weight:bold;display:block;margin-bottom:10px}input[type="number"]{width:100%;padding:10px;border:2px solid #4CAF50;border-radius:5px;box-sizing:border-box;font-size:1rem;position:relative;z-index:1;background-color:#fff;transition:border-color .3s ease,box-shadow .3s ease}input[type="number"]:focus{border-color:#388E3C;outline:none}#sr,#nsr{font-size:1.2rem;font-weight:bold;margin-top:20px}#sr.lightning-small,#nsr.lightning-small{animation:ls .3s ease-out;color:#FABB00;text-shadow:0 0 10px #FFD700}#sr.lightning-medium,#nsr.lightning-medium{animation:lm .3s ease-out;color:#FF8C00;text-shadow:0 0 15px #FF8C00}#sr.lightning-large,#nsr.lightning-large{animation:ll .3s ease-out;color:#FF4500;text-shadow:0 0 20px #FF4500}@keyframes ls{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes lm{0%,100%{transform:scale(1)}50%{transform:scale(1.07)}}@keyframes ll{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}#d{margin-top:15px;font-size:1rem;color:#333}#d li{margin-bottom:5px}</style></head><body><label for="el">輸入用電量 (度):</label><input type="number" id="el" name="el"><p id="sr">電費總額(夏季): 0 元 (台電計價)</p><p id="nsr">電費總額(非夏季): 0 元 (台電計價)</p><p id="r">盤子價: 0 元(一度 $5)</p><table id="rt"><thead><tr><th>用電範圍 (度)</th><th>使用度數 (度)</th><th>季節</th><th>費率 (元/度)</th><th>電費 (元)</th></tr></thead><tbody><tr><td colspan="6">輸入使用度數</td></tr></tbody></table><p id="s"></p><script>const b=[{l:0,h:120,s:1.68,ns:1.68},{l:120,h:330,s:2.45,ns:2.16},{l:330,h:500,s:3.7,ns:3.03},{l:500,h:700,s:5.04,ns:4.14},{l:700,h:1000,s:6.24,ns:5.07},{l:1000,h:'以上',s:8.46,ns:6.63}];function gpd(e){let st=0,nst=0,tb=document.querySelector('#rt tbody');if(tb){while(tb.firstChild){tb.removeChild(tb.firstChild)}}b.forEach((i,idx,a)=>{const pr=a[idx-1]?.h||0,cr=i.h;let d;if(e<=pr)return;if(i.l===1000&&e>1000){d=e-i.l}else if(e<=cr){d=e-pr}else if(e>cr){d=cr-pr}if(d>0){st+=d*i.s;nst+=d*i.ns;const r=document.createElement('tr');const rc=`${i.l}-${i.h==='以上'?'以上':i.h}`;ar(r,rc,'2');ar(r,d,'2');ar(r,'夏季');ar(r,i.s);const sa=(d*i.s).toFixed(2);ar(r,sa);const r2=document.createElement('tr');ar(r2,'非夏季');ar(r2,i.ns);nstc=(d*i.ns).toFixed(2);ar(r2,nstc);tb.appendChild(r);tb.appendChild(r2)}});return{st,nst}}function ar(r,c,rs){const ce=document.createElement('td');if(rs)ce.setAttribute('rowspan',rs);ce.textContent=c;r.appendChild(ce)}function is(){const cm=new Date().getMonth()+1;return cm>=6&&cm<=9}function glc(e){for(let i=b.length-1;i>=0;i--){if(e>b[i].h){if(i>=4)return'lightning-large';if(i>=2)return'lightning-medium';return'lightning-small'}}return''}document.getElementById('el').addEventListener('input',function(){const e=parseFloat(this.value);const{st,nst}=gpd(e)||{st:0,nst:0};const sre=document.getElementById('sr');sre.textContent=`電費總額(夏季):${st.toFixed(2)}元(台電計價)`;const nsre=document.getElementById('nsr');nsre.textContent=`電費總額(非夏季):${nst.toFixed(2)}元(台電計價)`;const re=document.getElementById('r');re.textContent=`${(e*5>st.toFixed(2)?'盤子價:':'破盤價:')}${e*5}元(一度5元)`;const se=document.getElementById('s');se.textContent=`目前季節:${is()?'夏季(6/1-9/30)':'非夏季(1/1-5/30,10/1-12/30)'}`;sre.classList.remove('lightning-small','lightning-medium','lightning-large');nsre.classList.remove('lightning-small','lightning-medium','lightning-large');const lc=glc(e);if(lc){sre.classList.add(lc);nsre.classList.add(lc)}});</script></body></html>
